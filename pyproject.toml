# ============================================================
# pyproject.toml - 自動スペルチェック機 (Ruff) 設定書
# ============================================================
# 目的: AIが生成するコードの品質を自動で統一する
# 担当: AI (この設定を読み込んでからコードを書く)
# ============================================================

[tool.ruff]
# Python バージョン (最低動作保証)
target-version = "py310"

# 1行の最大文字数
line-length = 100

# チェック対象ディレクトリ
src = ["src", "tests"]

# 有効にするルール (厳選)
[tool.ruff.lint]
select = [
    "E",      # 文法エラー (最重要)
    "F",      # 論理エラー (未使用変数など)
    "W",      # 警告
    "I",      # import順序
    "UP",     # モダンな書き方への自動変換
    "B",      # バグになりやすいパターン
    "SIM",    # 簡潔に書ける箇所
    "ANN",    # 型ヒント (設計思想の強制)
    "D",      # Docstrings (Google Style)
]

# 無視するルール
ignore = [
    "ANN401",  # Any禁止 (別途 06_style.md で管理)
    "D100",    # モジュールレベルDocstring (必須ではない)
    "D104",    # package __init__ Docstring
    "D107",    # Missing docstring in __init__
    "D400",    # First line should end with a period (Japanese punctuation)
    "D415",    # First line should end with a period, question mark, or exclamation point
]

# ============================================================
# ディレクトリ別の緩和ルール (作業効率のため)
# ============================================================
[tool.ruff.lint.per-file-ignores]
# テストコードは型ヒント・Docstring を緩和
"tests/*" = ["ANN", "D"]
# スクリプト類も同様
"scripts/*" = ["ANN", "D"]
# 開発ツールも緩和
"dev_tools/*" = ["ANN", "D"]

# ============================================================
# Import 順序の設定
# ============================================================
[tool.ruff.lint.isort]
known-first-party = ["src"]
force-single-line = false

# ============================================================
# Docstring Style
# ============================================================
[tool.ruff.lint.pydocstyle]
convention = "google"
