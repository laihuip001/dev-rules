# AI Code Standardization Plan

## Objective

To standardize and regulate the coding style and structure generated by AI agents to ensure consistency, maintainability, and alignment with project-specific "DNA".

## Strategy: The 3-Step Standardization Protocol

Based on the adversarial review and second-order thinking analysis, the following 3-step approach is adopted.

### 1. The Iron Law: Linter Configuration

**Action:** Establish `pyproject.toml` (or equivalent) as the absolute source of truth for mechanical formatting.

- **Tool:** `ruff` is recommended for speed and comprehensiveness.
- **Policy:**
  - Configuration must be read *before* code generation.
  - `per-file-ignores` usage is mandatory for `tests/` and `scripts/` to prevent over-engineering and token bloat.

### 2. The Constitution: Coding Style Manifesto

**Action:** Create `rules/constitution/06_style.md`.

- **Content:** Focus strictly on "Design Philosophy" and "Architectural Decisions", ensuring no overlap with Linter rules.
  - **Examples:**
    - Mandatory `pathlib` usage over `os.path`.
    - Strictness level of Type Hints (e.g., No `Any`).
    - Error handling policies (Propagate vs Catch).
- **Format:** Concise, imperative rules.

### 3. The Enforcer: Living Samples

**Action:** Reference "Living Samples" instead of static "Golden" files.

- **Concept:** Update `06_style.md` to point to specific *existing* high-quality files in `src/` (e.g., "For DTOs, mimic `src/core/dto.py`").
- **Benefit:** Prevents "Documentation Drift" where static samples become outdated. The AI learns from the current, working codebase.

## Action Plan (Next Steps)

1. **Draft `rules/constitution/06_style.md`**: Define the core architectural rules and point to living samples.
2. **Configure `pyproject.toml`**: Set up `ruff` rules with appropriate exclusions.
3. **Update Prompts**: Modify `prompts/modules/C4C5-code.md` to include a check for compliance with `06_style.md`.
